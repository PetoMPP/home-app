<h1 class="page-title w-full">User management</h1>
<button id="user-new-btn" class="btn btn-success" onclick="toggleNewUser()">Add user</button>
<div id="user-new-card" class="hidden card card-compact">
    <div class="card-body">
        <h2 class="card-title font-semibold text-xl">Create new user</h2>
        <form id="user-new-form" hx-put="/system/users" hx-target="#page-content" class="max-w-72">
            <label class="input input-sm input-bordered flex items-center gap-2 mb-1">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4 opacity-70">
                    <path
                        d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM12.735 14c.618 0 1.093-.561.872-1.139a6.002 6.002 0 0 0-11.215 0c-.22.578.254 1.139.872 1.139h9.47Z" />
                </svg>
                <input class="grow" name="name" autocomplete="name" />
            </label>
            <label class="input input-sm input-bordered flex items-center gap-2 mb-1">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4 opacity-70">
                    <path fill-rule="evenodd"
                        d="M14 6a4 4 0 0 1-4.899 3.899l-1.955 1.955a.5.5 0 0 1-.353.146H5v1.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2.293a.5.5 0 0 1 .146-.353l3.955-3.955A4 4 0 1 1 14 6Zm-4-2a.75.75 0 0 0 0 1.5.5.5 0 0 1 .5.5.75.75 0 0 0 1.5 0 2 2 0 0 0-2-2Z"
                        clip-rule="evenodd" />
                </svg>
                <input class="grow" name="password" type="password" autocomplete="new-password" />
            </label>
            <label class="input input-sm input-bordered flex items-center gap-2 mb-1">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4 opacity-70">
                    <path fill-rule="evenodd"
                        d="M14 6a4 4 0 0 1-4.899 3.899l-1.955 1.955a.5.5 0 0 1-.353.146H5v1.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2.293a.5.5 0 0 1 .146-.353l3.955-3.955A4 4 0 1 1 14 6Zm-4-2a.75.75 0 0 0 0 1.5.5.5 0 0 1 .5.5.75.75 0 0 0 1.5 0 2 2 0 0 0-2-2Z"
                        clip-rule="evenodd" />
                </svg>
                <input class="grow" name="confirm" type="password" autocomplete="new-password" />
            </label>
        </form>
        <div class="card-actions">
            <button form="user-new-form" class="btn btn-success">Create</button>
            <button class="btn btn-error" onclick="toggleNewUser()">Cancel</button>
        </div>
    </div>
</div>
<table class="table">
    <thead>
        <tr>
            <th>Username</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for user in users %}
        {% include "components/user-row.html" %}
        {% endfor %}
    </tbody>
</table>
<script>
    function toggleNewUser() {
        document.getElementById('user-new-card').classList.toggle('hidden');
        document.getElementById('user-new-btn').classList.toggle('hidden');
    }

    function togglePasswordChange(id) {
        document.getElementById('user-buttons-' + id).classList.toggle('hidden');
        document.getElementById('user-password-' + id).classList.toggle('hidden');
    }

</script>